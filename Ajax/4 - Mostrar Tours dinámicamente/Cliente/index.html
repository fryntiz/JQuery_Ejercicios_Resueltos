<!DOCTYPE html>
<!--
 @author Raúl Caro Pastorino
 @copyright Copyright © 2017 Raúl Caro Pastorino
 @license https://wwww.gnu.org/licenses/gpl.txt
-->

<!--
↓ INSTRUCCIONES DEL EJERCICIO ↓
Rellenar dinámicamente los tours mediante objetos JSON recibidos desde el
servidor por AJAX donde deberá mostrarse el nombre y precio de cada uno.

Desde el archivo php recibimos la cadena con los objetos instanciados de la
clase "Tour" y desde aquí lo convertimos en un objeto JSON el cual iteramos
con $.map() de forma que crearemos el nombre de la clase dinámicamente (tour
+ indice) por ejemplo "tour-0" "tour-1"...

Por último lo añadimos al DOM
-->
<html lang="es">
<>
	<meta charset="UTF-8">
	<title>Mostrar Tours dinámicamente</title>
    <script src="jquery-3.2.1.js"></script>
    <script>
        /**
         * @var tours Contiene un objeto con todos los tours que contiene las
         *            propiedades "name" y "price"
         */
        var tours;

        /**
         * Recibe todos los tours desde el servidor
         */
        function obtenerTours() {
            $.getJSON('../Servidor/consulta.php', function (data) {
                //console.log(data);
                var touractual = 0;
                $.each(data, function (name, price) {
                    $('#cajaTours').append('<div class="tour-' + touractual +
                    '">' +
                    '<h3 class="name">' + name + '</h3>' +
                    '<p class="price">' + price + '</p>' +
                    '</div>'
                    );
                });
            });
        }


        window.onload = function () {
            obtenerTours();
        }
    </script>
</head>
<body>
    <h1>Mostrar Tours dinámicamente</h1>
	<button>Mostrar tours</button>
	<h2>Tours actuales</h2>

    <!-- Esto debe generarse dinámicamente desde el servidor-->
    <div id="cajaTours">

    </div>


	<div class="tour-0">
	  <h3 class="name"></h3>
	  <p class="price"></p>
	</div>

	<div class="tour-1">
	  <h3 class="name"></h3>
	  <p class="price"></p>
	</div>

	<div class="tour-2">
	  <h3 class="name"></h3>
	  <p class="price"></p>
	</div>
</body>
</html>