<!DOCTYPE html>
<!--
 @author Raúl Caro Pastorino
 @copyright Copyright © 2017 Raúl Caro Pastorino
 @license https://wwww.gnu.org/licenses/gpl.txt
-->

<!--
↓ INSTRUCCIONES DEL EJERCICIO ↓
Crea un formulario con estos 3 campos:
    - Fecha de Nacimiento
    - Código
    - Teléfono

Valida los campos del formulario utilizando el método para jQuery "serialize()"
Envía el formulario mediante POST al archivo "consulta.php" que simulará el
servidor.

No se enviará el formulario al servidor, sino que se comprobará desde aquí
obteniendo el resultado mediante una consulta AJAX al servidor "consulta.php"
-->
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Validar formulario en el Servidor</title>
    <script src="./jquery-3.2.1.js"></script>
    <script>
    window.onload = function() {
        /**
         * Comprueba en el servidor si es válido el resultado y la pinta
         */
        function comprobar(e) {
            // Desactiva el evento por defecto del botón "submit"
            e.preventDefault();

            // Obtengo la respuesta del servidor y la pinto
            $.post('../Servidor/consulta.php').done(function (data) {
                $('#errores').empty();
                $('#errores').append(data.serialize);
            });
        }

        // Añado evento
        $('#formulario').on('submit', comprobar);
    }
    </script>
</head>

<body>
    <h1>Validar formulario en el Servidor</h1>
    <form id="formulario" method="post" action="../Servidor/consulta.php">
        Fecha de Nacimiento <input id="fecha_nacimiento"
                                   name="fecha_nacimiento" type="text" />
        <br />

        Código Postal <input id="codigo_postal" name="codigo_postal"
                             type="text" />

        <br />

        Nacimiento <input id="telefono" name="telefono" type="text" />

        <br />

        <button type="submit">Validar Datos</button>
    </form>

    <div id="errores"></div>
</body>
</html>
