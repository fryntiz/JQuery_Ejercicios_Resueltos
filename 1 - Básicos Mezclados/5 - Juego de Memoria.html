<!DOCTYPE html>
<!--
 @author Raúl Caro Pastorino
 @copyright Copyright © 2017 Raúl Caro Pastorino
 @license https://wwww.gnu.org/licenses/gpl.txt
-->

<!--
↓ INSTRUCCIONES DEL EJERCICIO ↓
Desarrolla un juego de memoria.

Para ello deberá de tener una serie de imágenes que se darán la vuelta de 2 en 2. Si la imagen, valor, es igual, se mantendrán visibles.

El juego acabará cuando todas las imágenes, valores... Estén descubiertos.

Añada la funcionalidad que estime oportuna.
-->
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Juego de Memoria</title>
    <style type="text/css">
        div {
            display: table-cell;
            padding: 3px;
            width: 80px;
            height: 80px;
            border: 3px groove #000000;
            text-align: center;
            vertical-align: middle;
        }

        span {
            opacity: 0;
        }

        #cajaJuego {
            margin: auto;
            width: 100%;
            border: 0;
        }


    </style>
    <script src="./jquery-3.2.1.js"></script>
    <script>
    window.onload = function() {
        // Contador de parejas
        var contador = 0;

        // Caja principal
        $('body').append('<div id="cajaJuego"></div>');

        // Genera el contenido del Juego y oculta los números
        for (let i=1; i<=2; i++) {
            $('#cajaJuego').append('<div><span>' + 1 + '</span></div>');
            $('#cajaJuego').append('<div><span>' + 2 + '</span></div>');
        }

        $('#cajaJuego>div').on('click', function() {
            // Si está oculto lo muestro y comparo con el descubierto
            if ($(this).find('span').css('opacity') != 1) {
                $(this).find('span').css('opacity', 1);

                // Añado una carta descubierta al hacer click
                contador += 1;

                // Compruebo si hay otro elemento con opacity="1" y mido su valor
                for (x of $('span')) {
                    // El contenido .text() es igual que el actual
                    // Es un span distinto al actual
                    // La opacidad es 1
                    // El contador es 1 o 3


                    // Replantear con las condiciones de arriba
                    if (($(x).text() == $(this).find('span').text()) &&
                    ($(x).css('opacity') == 1) &&
                    ($(x) != $(this).find('span'))) {
                        alert('pareja');
                    }
                }

                alert(contador);
            }
        });
    }
    </script>
</head>
<body>

</body>
</html>
