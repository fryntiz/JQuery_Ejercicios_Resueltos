<!DOCTYPE html>
<!--
 @author Raúl Caro Pastorino
 @copyright Copyright © 2017 Raúl Caro Pastorino
 @license https://wwww.gnu.org/licenses/gpl.txt
-->

<!--
↓ INSTRUCCIONES DEL EJERCICIO ↓
Desarrollar un plugin que permita gestionar menús.

El usuario podrá indicar:
    - Dos colores (opción principal y secundaria)
    - Alineación del texto
    - Ancho de cada bloque
    - Velocidad de aparición.
-->
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Plugin Gestionar Menú</title>
    <style type="text/css">
        #mimenu {

        }
    </style>
    <script src="./jquery-3.2.1.js"></script>
    <script>
    (function($) {
        $.fn.menuDesplegable = function(opciones) {
            var configuracion = {
                color1: '#bbbbbb',
                color2: '#0000ff',
                alinear: 'rigth',
                velocidad: 'slow',
                ancho: '150px' // cada bloque de menú
            };

            $.extend(configuracion, opciones);

            // Los bloques <div> directamente hijos del menú
            this.children('div').css({
                'float' : 'left',
                'color' : configuracion.color1,
                'background-color' : configuracion.color2,
                'width' : configuracion.ancho,
                'text-align' : configuracion.alinear,
            });

            // Todos los enlaces
            this.find('a').css({
                'text-decoration' : 'none',
                'color' : '#000000',
            });

            // Los segundos bloques <div> dentro de otro <div> hijo del menú
            this.children('div').children('div').next().css({
                'display' : 'none',
            });

            // Añade evento al contenedor principal de cada menú
            this.children('div').hover(
                function() {  // Función de mousein
                    var bloque = $(this).children('div').next();

                    // Estilos del bloque padre (contenedor <div>)
                    $(this).css({
                        'color' : configuracion.color2,
                        'background-color' : configuracion.color1,
                    });

                    // Animación para desplegar elemento
                    bloque.slideDown(configuracion.velocidad);

                    // Estilos para el bloque hijo
                    bloque.css({
                        'color' : configuracion.color2,
                        'background-color' : configuracion.color1,
                    });
                },
                function() {  // Función de mouseout
                    var bloque = $(this).children('div').next();

                    // Estilos del bloque padre (contenedor <div>)
                    $(this).css({
                        'color' : configuracion.color1,
                        'background-color' : configuracion.color2,
                    });

                    // Animación para desplegar elemento
                    bloque.slideUp(configuracion.velocidad);

                    // Estilos para el bloque hijo
                    bloque.css({
                        'color' : configuracion.color1,
                        'background-color' : configuracion.color2,
                    });
                }
            )

            return this;
        };
    })(jQuery);
    </script>
    <script>
    window.onload = function() {
        //$('#mimenu').menuDesplegable();

        // LLamada al plugin pasándole parámetros
        $('#mimenu').menuDesplegable({
            color1: '#cc6633',
            color2: '#33cc66',
            alinear: 'center',
            velocidad: 'slow',
            ancho: '200px',
        });
    }
    </script>
</head>

<body>
    <h1>Plugin Gestionar Menú</h1>

    <nav id="mimenu">
        <div>
            <div>Inicio</div>
        </div>

        <div>
            <div>Sobre nosotros</div>
            <div>
                <div><a href="#">Información</a></div>
                <div><a href="#">Contacto</a></div>
            </div>
        </div>

        <div>
            <div>Proyectos</div>
            <div>
                <div><a href="#">Diseño Web</a></div>
                <div><a href="#">Aplicaciones web</a></div>
                <div><a href="#">Branding</a></div>
            </div>
        </div>

        <div>
            <div>FAQs</div>
        </div>
    </nav>
</body>
</html>
